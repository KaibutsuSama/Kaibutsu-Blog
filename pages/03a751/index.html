<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis - 数据类型与命令 | Kaibutsu&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/Kaibutsu-Blog/img/favicon.ico">
    <meta name="description" content="个人博客">
    <meta name="keywords" content="个人博客">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/Kaibutsu-Blog/assets/css/0.styles.e67bcd93.css" as="style"><link rel="preload" href="/Kaibutsu-Blog/assets/js/app.129a816e.js" as="script"><link rel="preload" href="/Kaibutsu-Blog/assets/js/2.ef62d568.js" as="script"><link rel="preload" href="/Kaibutsu-Blog/assets/js/7.3b73e104.js" as="script"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/10.8b34037d.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/11.ae8b877a.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/12.59968cdb.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/13.3cd72ab6.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/14.51b17952.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/15.11cf8d76.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/16.90406ada.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/17.f8dcaf5d.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/18.96e21a74.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/19.4f1cc804.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/20.b6c347a1.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/21.a4013a12.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/22.11e2eb28.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/3.bdf7eb74.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/4.76784854.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/5.a701eea3.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/6.3d440051.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/8.ffeb6485.js"><link rel="prefetch" href="/Kaibutsu-Blog/assets/js/9.10abced9.js">
    <link rel="stylesheet" href="/Kaibutsu-Blog/assets/css/0.styles.e67bcd93.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Kaibutsu-Blog/" class="home-link router-link-active"><img src="/Kaibutsu-Blog/img/logo.png" alt="Kaibutsu's blog" class="logo"> <span class="site-name can-hide">Kaibutsu's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Kaibutsu-Blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发小记" class="dropdown-title"><a href="/Kaibutsu-Blog/record/" class="link-title">开发小记</a> <span class="title" style="display:none;">开发小记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Kaibutsu-Blog/java/" class="nav-link">Java</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/Kaibutsu-Blog/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Kaibutsu-Blog/mysql/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Kaibutsu-Blog/redis/" class="nav-link">Redis</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/Kaibutsu-Blog/tools/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Kaibutsu-Blog/linux/" class="nav-link">Linux</a></li></ul></li></ul></div></div> <a href="https://github.com/kaibutsusama/Kaibutsu-Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://s3.bmp.ovh/imgs/2022/08/05/fc4270e4c4517377.jpg"> <div class="blogger-info"><h3>KaibutsuSama</h3> <span></span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/Kaibutsu-Blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发小记" class="dropdown-title"><a href="/Kaibutsu-Blog/record/" class="link-title">开发小记</a> <span class="title" style="display:none;">开发小记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Kaibutsu-Blog/java/" class="nav-link">Java</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/Kaibutsu-Blog/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Kaibutsu-Blog/mysql/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Kaibutsu-Blog/redis/" class="nav-link">Redis</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/Kaibutsu-Blog/tools/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Kaibutsu-Blog/linux/" class="nav-link">Linux</a></li></ul></li></ul></div></div> <a href="https://github.com/kaibutsusama/Kaibutsu-Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关系数据库 - MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>缓存数据库 - Redis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Kaibutsu-Blog/pages/981831/" class="sidebar-link">Redis - 简介与安装</a></li><li><a href="/Kaibutsu-Blog/pages/03a751/" aria-current="page" class="active sidebar-link">Redis - 数据类型与命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/Kaibutsu-Blog/pages/03a751/#八大数据类型" class="sidebar-link">八大数据类型</a></li><li class="sidebar-sub-header level2"><a href="/Kaibutsu-Blog/pages/03a751/#帮助文档" class="sidebar-link">帮助文档</a></li><li class="sidebar-sub-header level2"><a href="/Kaibutsu-Blog/pages/03a751/#key-的层级格式" class="sidebar-link">Key 的层级格式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#java对象" class="sidebar-link">Java对象</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/Kaibutsu-Blog/pages/03a751/#常见通用命令" class="sidebar-link">常见通用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#keys" class="sidebar-link">KEYS</a></li><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#del" class="sidebar-link">DEL</a></li><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#exists" class="sidebar-link">EXISTS</a></li><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#expire-ttl" class="sidebar-link">EXPIRE &amp; TTL</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/Kaibutsu-Blog/pages/03a751/#数据类型使用命令" class="sidebar-link">数据类型使用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#string" class="sidebar-link">String</a></li><li class="sidebar-sub-header level4"><a href="/Kaibutsu-Blog/pages/03a751/#string常见api" class="sidebar-link">String常见API</a></li><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#hash" class="sidebar-link">Hash</a></li><li class="sidebar-sub-header level4"><a href="/Kaibutsu-Blog/pages/03a751/#hash常见api" class="sidebar-link">Hash常见API</a></li><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#list" class="sidebar-link">List</a></li><li class="sidebar-sub-header level4"><a href="/Kaibutsu-Blog/pages/03a751/#list常见api" class="sidebar-link">List常见API</a></li><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#set" class="sidebar-link">Set</a></li><li class="sidebar-sub-header level4"><a href="/Kaibutsu-Blog/pages/03a751/#set常用api" class="sidebar-link">Set常用API</a></li><li class="sidebar-sub-header level3"><a href="/Kaibutsu-Blog/pages/03a751/#sortedset" class="sidebar-link">SortedSet</a></li><li class="sidebar-sub-header level4"><a href="/Kaibutsu-Blog/pages/03a751/#sortedset常用api" class="sidebar-link">SortedSet常用API</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/Kaibutsu-Blog/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/Kaibutsu-Blog/database/#数据库" data-v-06225672>数据库</a></li><li data-v-06225672><a href="/Kaibutsu-Blog/database/#缓存数据库 - Redis" data-v-06225672>缓存数据库 - Redis</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/kaibutsusama" target="_blank" title="作者" class="beLink" data-v-06225672>KaibutsuSama</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><!---->Redis - 数据类型与命令<!----></h1>  <div class="theme-vdoing-content content__default"><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>Redis是一个 Key-Value 的数据库，key 一般是 String 类型，不过类型多种多样。</p></div> <p></p><div class="table-of-contents"><ul><li><a href="#八大数据类型">八大数据类型</a></li><li><a href="#帮助文档">帮助文档</a></li><li><a href="#key-的层级格式">Key 的层级格式</a><ul><li><a href="#java对象">Java对象</a></li></ul></li><li><a href="#常见通用命令">常见通用命令</a><ul><li><a href="#keys">KEYS</a></li><li><a href="#del">DEL</a></li><li><a href="#exists">EXISTS</a></li><li><a href="#expire-ttl">EXPIRE &amp; TTL</a></li></ul></li><li><a href="#数据类型使用命令">数据类型使用命令</a><ul><li><a href="#string">String</a></li><li><a href="#hash">Hash</a></li><li><a href="#list">List</a></li><li><a href="#set">Set</a></li><li><a href="#sortedset">SortedSet</a></li></ul></li></ul></div><p></p> <h2 id="八大数据类型"><a href="#八大数据类型" class="header-anchor">#</a> 八大数据类型</h2> <p><img src="/Kaibutsu-Blog/assets/img/redis02.452dca9c.png" alt=""></p> <h2 id="帮助文档"><a href="#帮助文档" class="header-anchor">#</a> 帮助文档</h2> <ol><li><p>在官方文档可查询，<a href="https://redis.io/commands/?group=string" target="_blank" rel="noopener noreferrer">点击跳转<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></li> <li><p>启动 redis-cli 登录之后 使用 help 指令查看得出结果。</p></li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>To get <span class="token builtin class-name">help</span> about Redis commands type:
      <span class="token string">&quot;help @&lt;group&gt;&quot;</span> to get a list of commands <span class="token keyword">in</span> <span class="token operator">&lt;</span>group<span class="token operator">&gt;</span>
      <span class="token string">&quot;help &lt;command&gt;&quot;</span> <span class="token keyword">for</span> <span class="token builtin class-name">help</span> on <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span>
      <span class="token string">&quot;help &lt;tab&gt;&quot;</span> to get a list of possible <span class="token builtin class-name">help</span> topics
      <span class="token string">&quot;quit&quot;</span> to <span class="token builtin class-name">exit</span>

To <span class="token builtin class-name">set</span> redis-cli preferences:
      <span class="token string">&quot;:set hints&quot;</span> <span class="token builtin class-name">enable</span> online hints
      <span class="token string">&quot;:set nohints&quot;</span> disable online hints
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="key-的层级格式"><a href="#key-的层级格式" class="header-anchor">#</a> Key 的层级格式</h2> <p>在 Redis 中，数据是以键值对的形式存在，</p> <p>与 MySQL 不同的是，Redis 没有 Table 的概念，</p> <p>那么 Keys 必须为唯一，因此！大多数的 Key 都是以 id的形式。</p> <p>在一个业务常见中，用户和商品的信息用到 redis，那么用户的 id 是1，商品的 id 也是1。</p> <p>Key 将允许由多个单词形成层级结构 多个单词用：隔开。</p> <p>模范示例，具体取决于团队的标准。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>ProjectName:ModuleName:Type:id

<span class="token comment"># Example</span>
kaibutsusama:user:1
kaibutsusama:product:1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="java对象"><a href="#java对象" class="header-anchor">#</a> Java对象</h3> <p>如果Value是一个Java对象，例如一个User对象，则可以将对象序列化为JSON字符串后存储：</p> <table><thead><tr><th style="text-align:center;">KEY</th> <th style="text-align:center;">VALUE</th></tr></thead> <tbody><tr><td style="text-align:center;">heima:user:1</td> <td style="text-align:center;">{&quot;id&quot;:1, &quot;name&quot;: &quot;KaibutsuSama&quot;, &quot;age&quot;: 20}</td></tr> <tr><td style="text-align:center;">heima:product:1</td> <td style="text-align:center;">{&quot;id&quot;:1, &quot;name&quot;: &quot;Iphone11&quot;, &quot;price&quot;: 10899}</td></tr></tbody></table> <h2 id="常见通用命令"><a href="#常见通用命令" class="header-anchor">#</a> 常见通用命令</h2> <p>通用命令是部分数据类型都可以使用的命令。</p> <div class="custom-block tip"><p class="custom-block-title">查看所有通用命令</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">help</span> @generic
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h3 id="keys"><a href="#keys" class="header-anchor">#</a> KEYS</h3> <p>KEYS: 查看符合模板的所有 key</p> <p>因为是通配符查找，所以底层是<code>模糊查找</code>，且 Redis 为<code>单线程</code>，在数据量过大如百万数据量时使用 KEYS 查找，在搜索时间内可能造成<code>整个Redis的服务堵塞</code>。</p> <p>但如果 Redis 是一个<code>集群模式</code>下，有主有从，那么在<code>从节点</code>上执行 KEYS 命令，其实也还可以，<code>别在主节点运行</code>即可。</p> <div class="custom-block danger"><p class="custom-block-title">官方文档</p> <p>consider KEYS as a command that should only be used in production environments with extreme care. It may ruin performance when it is executed against large databases. This command is intended for debugging and special operations, such as changing your keyspace layout. Don't use KEYS in your regular application code. If you're looking for a way to find keys in a subset of your keyspace, consider using SCAN or sets.</p></div> <p><strong>Example</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MSET firstname Jack lastname Stuntman age <span class="token number">35</span>
<span class="token string">&quot;OK&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> KEYS *name*
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;firstname&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;lastname&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> KEYS a??
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> KEYS *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;firstname&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;lastname&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="del"><a href="#del" class="header-anchor">#</a> DEL</h3> <p>DEL: 删除一个指定的 Key</p> <div class="custom-block tip"><p class="custom-block-title">官方文档</p> <p>Removes the specified keys. A key is ignored if it does not exist.</p></div> <p>如果批量删除一堆存在和不存在的 KEY，那么删除能够进行成功，并且会 Return 一个 integer</p> <p>Integer reply: The number of keys that were removed.</p> <p><strong>example</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SET key1 <span class="token string">&quot;Hello&quot;</span>
<span class="token string">&quot;OK&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SET key2 <span class="token string">&quot;World&quot;</span>
<span class="token string">&quot;OK&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> DEL key1 key2 key3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="exists"><a href="#exists" class="header-anchor">#</a> EXISTS</h3> <p>EXISTS: 判断一个 Key 是否存在</p> <div class="custom-block tip"><p class="custom-block-title">官方文档</p> <p>The user should be aware that if the same existing key is mentioned in the arguments multiple times, it will be counted multiple times. So if somekey exists, EXISTS somekey somekey will return 2.</p></div> <p>Integer reply, specifically the number of keys that exist from those specified as arguments.</p> <p><strong>Example</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SET key1 <span class="token string">&quot;Hello&quot;</span>
<span class="token string">&quot;OK&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS key1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS nosuchkey
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SET key2 <span class="token string">&quot;World&quot;</span>
<span class="token string">&quot;OK&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS key1 key2 nosuchkey
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="expire-ttl"><a href="#expire-ttl" class="header-anchor">#</a> EXPIRE &amp; TTL</h3> <p>EXPIRE: 给 Key 设置一个有效期，到期后该 Key 会自动删除。
TTL： 查询 Key 的有效期
因为 Redis 将内存存储在内存里，不到期删除内存迟早会满，因此需要 EXPIRE。</p> <p>EXPIRE 的 Integer reply 如果为1，那么就是设置成功，如果为0，未设置成功。
TTL 的 Integer reply 如果为-1，那么就是永久有效。</p> <p><strong>Example</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SET mykey <span class="token string">&quot;Hello&quot;</span>
<span class="token string">&quot;OK&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXPIRE mykey <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> TTL mykey
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SET mykey <span class="token string">&quot;Hello World&quot;</span>
<span class="token string">&quot;OK&quot;</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> TTL mykey
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> -1
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXPIRE mykey <span class="token number">10</span> XX
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> TTL mykey
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> -1
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXPIRE mykey <span class="token number">10</span> NX
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> TTL mykey
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span>
redis:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="数据类型使用命令"><a href="#数据类型使用命令" class="header-anchor">#</a> 数据类型使用命令</h2> <h3 id="string"><a href="#string" class="header-anchor">#</a> String</h3> <p>String 类型，也就是字符串，最简单的数据类型。</p> <p>Value 就是字符串，根据字符串的不同，又分为 3 类；</p> <p>不管是哪种格式，底层都是字节数组的形式存储，编码方式不同，字符串类型最大空间不可过512m。</p> <ul><li>String： 普通字符串</li> <li>int： 整数类型，可自增、自减操作</li> <li>float： 浮点类型，可自增、自减操作</li></ul> <table><thead><tr><th style="text-align:center;">KEY</th> <th style="text-align:center;">VALUE</th></tr></thead> <tbody><tr><td style="text-align:center;">msg</td> <td style="text-align:center;">你好，Redis</td></tr> <tr><td style="text-align:center;">id</td> <td style="text-align:center;">10</td></tr> <tr><td style="text-align:center;">money</td> <td style="text-align:center;">100000.16</td></tr></tbody></table> <h4 id="string常见api"><a href="#string常见api" class="header-anchor">#</a> String常见API</h4> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>SET</td> <td>添加或者修改已经存在的一个String类型的键值对</td></tr> <tr><td>GET</td> <td>根据key获取String类型的value</td></tr> <tr><td>MSET</td> <td>批量添加多个String类型的键值对</td></tr> <tr><td>MGET</td> <td>获得值的长度</td></tr> <tr><td>INCR</td> <td>让一个整型的key自增1</td></tr> <tr><td>INCRBY</td> <td>让一个整型的key自增并指定步长，例如：incrby num 2 让num值自增2</td></tr> <tr><td>INCRBYFLOAT</td> <td>让一个浮点类型的数字自增并指定步长</td></tr> <tr><td>SETNX</td> <td>添加一个String类型的键值对，并且指定有效期</td></tr> <tr><td>SETEX</td> <td>设置一个或者多个 key-value 键值对</td></tr></tbody></table> <h3 id="hash"><a href="#hash" class="header-anchor">#</a> Hash</h3> <p>Redis hash（哈希散列）是由字符类型的 field（字段）和 value 组成的哈希映射表结构（也称散列表），它非常类似于表格结构。在 hash 类型中，field 与 value 一一对应，且不允许重复。</p> <p>Redis hash 特别适合于存储对象。一个 filed / value 可以看做是表格中一条数据记录；而一个 key 可以对应多条数据。</p> <h4 id="hash常见api"><a href="#hash常见api" class="header-anchor">#</a> Hash常见API</h4> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>HSET</td> <td>添加或者修改hash类型key的field的值</td></tr> <tr><td>HGET</td> <td>获取一个hash类型key的field的值</td></tr> <tr><td>HMSET</td> <td>批量添加多个hash类型key的field的值</td></tr> <tr><td>HMGET</td> <td>批量获取多个hash类型key的field的值</td></tr> <tr><td>HGETALL</td> <td>获取一个hash类型的key中的所有的field和value</td></tr> <tr><td>HKEYS</td> <td>获取一个hash类型的key中的所有的field</td></tr> <tr><td>HINCRBY</td> <td>让一个hash类型key的字段值自增并指定步长</td></tr> <tr><td>HSETNX</td> <td>添加一个hash类型的key的field值，前提是这个field不存在，否则不执行</td></tr></tbody></table> <h3 id="list"><a href="#list" class="header-anchor">#</a> List</h3> <p>Redis List 是简单的字符串列表，按照插入顺序排序。可以看作是双向链表，可以添加一个元素到列表的头部（左边）或者尾部（右边），也就是既可以支持正向检索和也可以支持反向检索。</p> <p>和 Java 中的 LinkedList 类似。</p> <ul><li>有序</li> <li>元素可以重复</li> <li>插入和删除快</li> <li>查询速度一般</li></ul> <p>业务场景使用，例如：朋友圈点赞，评论列表等。</p> <p><img src="/Kaibutsu-Blog/assets/img/redis03.266fff5d.png" alt=""></p> <h4 id="list常见api"><a href="#list常见api" class="header-anchor">#</a> List常见API</h4> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>LPUSH key element</td> <td>向列表左侧插入一个或多个元素</td></tr> <tr><td>LPOP key</td> <td>移除并返回列表左侧的第一个元素，没有则返回nil</td></tr> <tr><td>RPUSH key element</td> <td>向列表右侧插入一个或多个元素</td></tr> <tr><td>RPOP key</td> <td>移除并返回列表右侧的第一个元素</td></tr> <tr><td>LRANGE key start end</td> <td>返回一段角标范围内的所有元素</td></tr> <tr><td>BLPOP &amp; BRPOP</td> <td>与LPOP和RPOP类似，只不过在没有元素时等待指定时间，而不是直接返回nil</td></tr></tbody></table> <h3 id="set"><a href="#set" class="header-anchor">#</a> Set</h3> <p>Redis 的Set 是String 类型的无序集合。 集合成员是唯一的，这就意味着集合中不能出现重复的数据。</p> <p>集合对象的编码可以是intset 或者hashtable。 Redis 中集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。</p> <ul><li>无序</li> <li>元素不可重复</li> <li>查找快</li> <li>支持交集.并集.差集等功能</li></ul> <h4 id="set常用api"><a href="#set常用api" class="header-anchor">#</a> Set常用API</h4> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>SADD key member</td> <td>向set中添加一个或多个元素</td></tr> <tr><td>SREM key member</td> <td>移除set中的指定元素</td></tr> <tr><td>SCARD key</td> <td>返回set中元素的个数</td></tr> <tr><td>SISMEMBER key member</td> <td>判断一个元素是否存在于set中</td></tr> <tr><td>SMEMBERS</td> <td>获取set中的所有元素</td></tr> <tr><td>SINTER key1 key2 ...</td> <td>求key1与key2的交集</td></tr> <tr><td>SDIFF key1 key2 ...</td> <td>求key1与key2的差集</td></tr> <tr><td>SUNION key1 key2 ...</td> <td>求key1和key2的并集</td></tr></tbody></table> <h3 id="sortedset"><a href="#sortedset" class="header-anchor">#</a> SortedSet</h3> <p>Redis 有序集合（SortedSet）和集合（Set）一样也是 String 类型元素的集合,且<code>不允许重复</code>的 member。</p> <p>不同的是每个元素都会关联一个 <code>double 类型的 score</code>。 redis 正是通过 score 来为集合中的成员进行<code>从小到大</code>的排序。</p> <p>因为 SortedSet 可排序的特性 通常用于实现 <code>排行榜</code> 这样的功能。</p> <ul><li>可排序</li> <li>元素不可重复</li> <li>查询速度快</li></ul> <h4 id="sortedset常用api"><a href="#sortedset常用api" class="header-anchor">#</a> SortedSet常用API</h4> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>ZADD key score member</td> <td>加一个或多个元素到sorted set ，如果已经存在则更新其score值</td></tr> <tr><td>ZREM key member</td> <td>删除sorted set中的一个指定元素</td></tr> <tr><td>ZSCORE key member</td> <td>获取sorted set中的指定元素的score值</td></tr> <tr><td>ZRANK key member</td> <td>获取sorted set 中的指定元素的排名</td></tr> <tr><td>ZCARD key</td> <td>获取sorted set中的元素个数</td></tr> <tr><td>ZCOUNT key min max</td> <td>统计score值在给定范围内的所有元素的个数</td></tr> <tr><td>ZINCRBY key increment member</td> <td>让sorted set中的指定元素自增，步长为指定的increment值</td></tr> <tr><td>ZRANGE key min max</td> <td>按照score排序后，获取指定排名范围内的元素</td></tr> <tr><td>ZRANGEBYSCORE key min max</td> <td>按照score排序后，获取指定score范围内的元素</td></tr> <tr><td>ZDIFF.ZINTER.ZUNION</td> <td>求差集.交集.并集</td></tr></tbody></table> <p>所有的排名默认都是升序，如果要降序则在命令的Z后面添加REV即可，例如：</p> <ul><li>升序获取sorted set 中的指定元素的排名：ZRANK key member</li> <li>降序获取sorted set 中的指定元素的排名：ZREVRANK key memeber</li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/kaibutsusama/Kaibutsu-Blog/edit/master/docs/10.数据库/50.缓存数据库 - Redis/02.Redis - 数据类型与命令.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/Kaibutsu-Blog/tags/?tag=Redis" title="标签">#Redis</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/03/11, 17:42:58</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/Kaibutsu-Blog/pages/981831/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Redis - 简介与安装</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Kaibutsu-Blog/pages/981831/" class="prev">Redis - 简介与安装</a></span> <!----></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:XINLEROY.LIU001@STU.BMCC.CUNY.EDU
" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/kaibutsusama" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>Kaibutsu | <a href="https://github.com/kaibutsusama" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/Kaibutsu-Blog/assets/js/app.129a816e.js" defer></script><script src="/Kaibutsu-Blog/assets/js/2.ef62d568.js" defer></script><script src="/Kaibutsu-Blog/assets/js/7.3b73e104.js" defer></script>
  </body>
</html>
